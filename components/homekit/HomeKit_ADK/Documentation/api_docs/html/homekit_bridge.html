

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>HomeKit Bridge &mdash; HomeKit ADK  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/tabs.js"></script>
        <script src="_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="IP Camera" href="ip_camera.html" />
    <link rel="prev" title="Firmware Update Service" href="firmware_update.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> HomeKit ADK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="adk_architecture.html">ADK Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="adk_directory_structure.html">ADK Directory Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker with ADK</a></li>
</ul>
<p class="caption"><span class="caption-text">Step-by-step Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started with ADK</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi_setup.html">Raspberry Pi Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="bct.html">Bonjour Conformance Test (BCT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="wac_on_raspberrypi.html">WAC on Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera_on_darwin.html">Camera on macOS</a></li>
</ul>
<p class="caption"><span class="caption-text">Troubleshooting ADK</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="interact_with_applications.html">Interacting with ADK applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting ADK</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_unit_tests.html">Writing Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug_adk.html">Debugging ADK Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">ADK Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="accessory_development.html">Accessory Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessory_pairing.html">Accessory Pairing</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessory_authentication.html">Accessory Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="provisioning_tools.html">Provisioning Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADK_Memory_Usage_and_Requirements.html">Memory Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="crypto.html">Cryptographic Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="make_options.html">Compile Time Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_convention.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration_guide.html">ADK Migration Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">HomeKit Services</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="accessory_diagnostics.html">Accessory Diagnostics Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="accessory_metrics.html">Accessory Metrics Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="adaptive_light.html">Adaptive Lighting Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="appletv_remote.html">Apple TV Remote</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware_update.html">Firmware Update Service</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">HomeKit Bridge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compile">Compile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run">Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-details">Implementation Details</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#accessory-attribute-database">Accessory Attribute Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bridge-reconfiguration">Bridge Reconfiguration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#callbacks-for-bridged-characteristics">Callbacks for Bridged Characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aids-of-bridged-accessories">AIDs of Bridged Accessories</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ip_camera.html">IP Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="lock_profile.html">Lock Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateless_programmable_switch.html">Stateless Programmable Switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="thread.html">HAP over Thread Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="wifi_reconfiguration_feature.html">WiFi Reconfiguration Service</a></li>
</ul>
<p class="caption"><span class="caption-text">PAL APIs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_api_docs/dir_PAL.html">Directory PAL</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HomeKit ADK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>HomeKit Bridge</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/homekit_bridge.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="homekit-bridge">
<h1>HomeKit Bridge<a class="headerlink" href="#homekit-bridge" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>A HomeKit bridge enables HomeKit controllers to access non-HomeKit accessories. Without a bridge HomeKit establishes
end-to-end security with a HomeKit controller being one of the endpoints and an accessory being the other endpoint.
However, with a HomeKit bridge the bridged accessories by definition do not support HAP and so the bridge becomes the
endpoint of the secure connection. To mitigate this fact, HomeKit defines restrictions on the profiles and protocols
that may be supported by a bridge. See the <em>HomeKit Accessory Protocol Specification</em> for more details. A HomeKit bridge
itself is also a HomeKit accessory and must be an <em>IP</em> accessory (Wi-Fi or Ethernet).</p>
<div class="section" id="compile">
<h3>Compile<a class="headerlink" href="#compile" title="Permalink to this headline">¶</a></h3>
<p>You must have all the <a class="reference internal" href="getting_started.html"><span class="doc">prerequisites</span></a> for your development platform to compile the ADK.
Once all the prerequisites are installed for your platform, run the following to compile the sample Lightbulb Bridge
application:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-bWFjT1M=" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-bWFjT1M=" name="bWFjT1M=" role="tab" tabindex="0">macOS</button><button aria-controls="panel-0-TGludXg=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-TGludXg=" name="TGludXg=" role="tab" tabindex="-1">Linux</button><button aria-controls="panel-0-UmFzcGJlcnJ5IFBp" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-UmFzcGJlcnJ5IFBp" name="UmFzcGJlcnJ5IFBp" role="tab" tabindex="-1">Raspberry Pi</button><button aria-controls="panel-0-Tm9yZGljIG5SRjUy" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Tm9yZGljIG5SRjUy" name="Tm9yZGljIG5SRjUy" role="tab" tabindex="-1">Nordic nRF52</button></div><div aria-labelledby="tab-0-bWFjT1M=" class="sphinx-tabs-panel group-tab" id="panel-0-bWFjT1M=" name="bWFjT1M=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nv">TARGET</span><span class="o">=</span>Darwin <span class="nv">APPS</span><span class="o">=</span><span class="s2">&quot;Bridge&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-TGludXg=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-TGludXg=" name="TGludXg=" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nv">TARGET</span><span class="o">=</span>Linux <span class="nv">APPS</span><span class="o">=</span><span class="s2">&quot;Bridge&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-UmFzcGJlcnJ5IFBp" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-UmFzcGJlcnJ5IFBp" name="UmFzcGJlcnJ5IFBp" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nv">TARGET</span><span class="o">=</span>Raspi <span class="nv">APPS</span><span class="o">=</span><span class="s2">&quot;Bridge&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-Tm9yZGljIG5SRjUy" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Tm9yZGljIG5SRjUy" name="Tm9yZGljIG5SRjUy" role="tabpanel" tabindex="0"><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nv">TARGET</span><span class="o">=</span>nRF52 <span class="nv">APPS</span><span class="o">=</span><span class="s2">&quot;Bridge&quot;</span>
</pre></div>
</div>
</div></div>
</div>
<div class="section" id="run">
<h3>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>Please follow instructions at <a class="reference external" href="getting_started.html#step-5-running-an-adk-application">Running an ADK Application</a> to
run an ADK sample application.</p>
</div>
</div>
<div class="section" id="implementation-details">
<h2>Implementation Details<a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessory-attribute-database">
<h3>Accessory Attribute Database<a class="headerlink" href="#accessory-attribute-database" title="Permalink to this headline">¶</a></h3>
<p>A bridge must represent the accessory attribute databases of the accessories that it currently bridges to, as separate
HAP accessory objects. A bridge may define an upper limit of HAP accessory objects (at most 150, according to the
specification). Sufficient memory for this number of accessories should be statically allocated, to ensure robust
operation. In the samples, this is done in App.c like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="n">AccessoryState</span><span class="w"> </span><span class="n">accessoryState</span><span class="p">[</span><span class="n">kAppState_NumLightBulbs</span><span class="p">];</span><span class="w"></span>
</pre></div>
</div>
<p>The maximum number of bridged light bulbs is defined as the constant <code class="docutils literal notranslate"><span class="pre">kAppState_NumLightBulbs</span></code> in file <em>DB.h</em>.
See <em>ADK/Applications/Bridge</em> for more details of bridges for LightBulb-compatible accessories, and
<em>ADK/Applications/RemoteBridge</em> for Remote accessories.</p>
<p>The amount of memory that needs to be allocated depends on the accessory attribute databases of the bridged accessories,
i.e., on their profiles, more exactly on the number of attributes that have to be represented. For a simple light bulb,
the number of attributes is calculated like this (see <em>ADK/Applications/LightBulb/DB.h</em>):</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">kAttributeCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="w"></span>
</pre></div>
</div>
<p>i.e., the sum of the number of attributes for the <em>Accessory Information service (10)</em>,
<em>Protocol Information service (3)</em>, <em>Pairing service (5)</em>, and the <em>LightBulb service (4)</em>. For bridges, each bridged
accessory requires another <em>Accessory Information service</em> plus the number of attributes for the bridged accessories
themselves:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">kAttributeCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mi">8</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">kAppState_NumLightBulbs</span><span class="w"></span>
</pre></div>
</div>
<p>Note that the bridged accessory itself exposes the <em>ADKVersion</em> and <em>Product Data characteristics</em> - as it is
implemented using the ADK - while the bridged light bulbs do not - as they are not implemented using the ADK. This
explains why it is <em>(8 + 4)</em> and not <em>(10 + 4)</em> in the expression above.</p>
</div>
<div class="section" id="bridge-reconfiguration">
<h3>Bridge Reconfiguration<a class="headerlink" href="#bridge-reconfiguration" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, bridges need to be reconfigured, e.g., for adding another bridged accessory. In such a case, the HomeKit
accessory server must be stopped using function <code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerStop</span></code>. Once the accessory server has stopped, the
callback <code class="docutils literal notranslate"><span class="pre">HandleUpdatedState</span></code> from <code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerCallbacks</span></code> is called. Then the list of bridged accessories is
changed (note that the list must be null-terminated), and then the accessory server must be started again using function
<code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerStartBridge</span></code> with argument configurationChanged set to true. See also sections
<a class="reference external" href="accessory_development.html#start-the-application">Start the Application</a> and <a class="reference external" href="accessory_development.html#terminate-the-application">Terminate the Application</a>.
The <em>config number (CN)</em> is incremented automatically if the configurationChanged argument is set to true for the
functions starting a bridge (<code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerStartBridge</span></code> and <code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerStartCameraBridge</span></code> respectively).</p>
</div>
<div class="section" id="callbacks-for-bridged-characteristics">
<h3>Callbacks for Bridged Characteristics<a class="headerlink" href="#callbacks-for-bridged-characteristics" title="Permalink to this headline">¶</a></h3>
<p>When the HAP Library invokes a callback function in order to read or write a characteristic value, then the callback
must return immediately. It must never wait for a bridged accessory that is connected via a slow communication channel.
This means that for communication technologies such as ZigBee, the characteristic values must be cached.</p>
<p>In a read callback, the cached value of the characteristic is returned along with <code class="docutils literal notranslate"><span class="pre">kHAPError_None</span></code>. A cached value
should be returned even if it is not known to be completely up-to-date. The cache is then updated as fast as the
communication channel allows. If the previously cached value is not valid anymore and needs to be replaced with a new
value, the HomeKit controller(s) should be notified of the new value by calling <code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerRaiseEvent</span></code>.</p>
<p>In a write callback, the cached value of the characteristic is updated and <code class="docutils literal notranslate"><span class="pre">kHAPError_None</span></code> returned. If the new value
is different from the previously cached value, the bridged accessory is updated as fast as the communication channel
allows. If the bridged accessory signals that this update failed, the cache should be reverted to the old value and the
HomeKit controller(s) should be notified of the old value by calling <code class="docutils literal notranslate"><span class="pre">HAPAccessoryServerRaiseEvent</span></code>.</p>
<p>When a bridged accessory is known to be currently unreachable, this can be signaled in a read or write handler by
returning <code class="docutils literal notranslate"><span class="pre">kHAPError_Unknown</span></code> (<em>unable to communicate with requested service</em>).</p>
<p>For a HAP multi-characteristic write, the ADK invokes the callbacks of all involved characteristics in one go, meaning
that any timer or other callbacks scheduled to the run loop will not execute before all pending characteristic write
callbacks have been invoked.</p>
</div>
<div class="section" id="aids-of-bridged-accessories">
<h3>AIDs of Bridged Accessories<a class="headerlink" href="#aids-of-bridged-accessories" title="Permalink to this headline">¶</a></h3>
<p>For bridged accessories, it must be ensured to assign new accessories a new AID and not to reuse an old AID. Otherwise
some things such as Remote profile don’t work correctly.</p>
<p>Example of <em>App.c</em> from <em>RemoteBridge</em>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Compute a new accessory instance ID.</span>
<span class="cm"> */</span><span class="w"></span>
<span class="n">HAP_RESULT_USE_CHECK</span><span class="w"></span>
<span class="k">static</span><span class="w"> </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">GetNewAccessoryInstanceID</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">aid</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">collision</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">do</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">HAPPlatformRandomNumberFill</span><span class="p">(</span><span class="o">&amp;</span><span class="n">aid</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="w"> </span><span class="n">aid</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">aid</span><span class="w"> </span><span class="o">&amp;=</span><span class="w"> </span><span class="mh">0x7FFFFFFFFFFFFFFF</span><span class="p">;</span><span class="w"> </span><span class="c1">// Workaround for certain controllers that have issues with larger aid values.</span>
<span class="w">        </span><span class="n">collision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">aid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">continue</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">kAppState_NumRemotes</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">aid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">accessoryConfiguration</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">bridgedAccessory</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">aid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">collision</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">collision</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">HAPAssert</span><span class="p">(</span><span class="n">aid</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">aid</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="ip_camera.html" class="btn btn-neutral float-right" title="IP Camera" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="firmware_update.html" class="btn btn-neutral float-left" title="Firmware Update Service" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright © 2021 Apple Inc. All Rights Reserved..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>