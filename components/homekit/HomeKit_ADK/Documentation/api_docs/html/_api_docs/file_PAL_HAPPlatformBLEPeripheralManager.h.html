

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>File HAPPlatformBLEPeripheralManager.h &mdash; HomeKit ADK  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
  <link rel="stylesheet" href="../_static/collapsible-lists/css/tree_view.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> HomeKit ADK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../adk_architecture.html">ADK Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adk_directory_structure.html">ADK Directory Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker with ADK</a></li>
</ul>
<p class="caption"><span class="caption-text">Step-by-step Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started with ADK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../raspi_setup.html">Raspberry Pi Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bct.html">Bonjour Conformance Test (BCT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wac_on_raspberrypi.html">WAC on Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../camera_on_darwin.html">Camera on macOS</a></li>
</ul>
<p class="caption"><span class="caption-text">Troubleshooting ADK</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interact_with_applications.html">Interacting with ADK applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting ADK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing_unit_tests.html">Writing Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../debug_adk.html">Debugging ADK Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">ADK Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../accessory_development.html">Accessory Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accessory_pairing.html">Accessory Pairing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accessory_authentication.html">Accessory Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provisioning_tools.html">Provisioning Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ADK_Memory_Usage_and_Requirements.html">Memory Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto.html">Cryptographic Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../make_options.html">Compile Time Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_convention.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide.html">ADK Migration Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">HomeKit Services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../accessory_diagnostics.html">Accessory Diagnostics Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accessory_metrics.html">Accessory Metrics Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adaptive_light.html">Adaptive Lighting Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appletv_remote.html">Apple TV Remote</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware_update.html">Firmware Update Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../homekit_bridge.html">HomeKit Bridge</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ip_camera.html">IP Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lock_profile.html">Lock Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateless_programmable_switch.html">Stateless Programmable Switch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thread.html">HAP over Thread Profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wifi_reconfiguration_feature.html">WiFi Reconfiguration Service</a></li>
</ul>
<p class="caption"><span class="caption-text">PAL APIs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dir_PAL.html">Directory PAL</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HomeKit ADK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>File HAPPlatformBLEPeripheralManager.h</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/_api_docs/file_PAL_HAPPlatformBLEPeripheralManager.h.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="file-happlatformbleperipheralmanager-h">
<span id="file-pal-happlatformbleperipheralmanager-h"></span><h1>File HAPPlatformBLEPeripheralManager.h<a class="headerlink" href="#file-happlatformbleperipheralmanager-h" title="Permalink to this headline">¶</a></h1>
<p>↰ <a class="reference internal" href="dir_PAL.html#dir-pal"><span class="std std-ref">Parent directory</span></a> (<code class="docutils literal notranslate"><span class="pre">PAL</span></code>)</p>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#definition-pal-happlatformbleperipheralmanager-h" id="id1">Definition (<code class="docutils literal notranslate"><span class="pre">PAL/HAPPlatformBLEPeripheralManager.h</span></code>)</a></p></li>
<li><p><a class="reference internal" href="#detailed-description" id="id2">Detailed Description</a></p></li>
<li><p><a class="reference internal" href="#includes" id="id3">Includes</a></p></li>
<li><p><a class="reference internal" href="#classes" id="id4">Classes</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id5">Functions</a></p></li>
<li><p><a class="reference internal" href="#defines" id="id6">Defines</a></p></li>
<li><p><a class="reference internal" href="#typedefs" id="id7">Typedefs</a></p></li>
</ul>
</div>
<div class="section" id="definition-pal-happlatformbleperipheralmanager-h">
<h2>Definition (<code class="docutils literal notranslate"><span class="pre">PAL/HAPPlatformBLEPeripheralManager.h</span></code>)<a class="headerlink" href="#definition-pal-happlatformbleperipheralmanager-h" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="program_listing_file_PAL_HAPPlatformBLEPeripheralManager.h.html">Program Listing for File HAPPlatformBLEPeripheralManager.h</a></li>
</ul>
</div>
</div>
<div class="section" id="detailed-description">
<h2>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>A BLE accessory comes with a BLE stack, which is interfaced through this PAL module. The PAL implementation must wrap the BLE stack functionality for advertising, services, characteristics, and read/write events.
<strong>Expected behavior:</strong>
The requirements for a BLE stack are as follows:</p>
<ul class="simple">
<li><p>The BLE stack must allow the HAP Library to handle read and write requests directly. This is required for HomeKit session security. For read requests, the response value and length are dynamically computed on a per-request basis. For write requests, the application must be able to decide whether an error response or a write response is return­ed. Therefore, the stack must not automatically respond with cached values.</p></li>
<li><p>The BLE stack must allow delaying the response to a read or write request by several seconds.</p></li>
<li><p>It must be possible to disconnect from the central without responding to a read or write request. It must be possible to immediately disconnect after a read response has been transmitted.</p></li>
<li><p>It is recommended that the GATT database size be configurable by the application and that characteristic values be stored in application memory. It is also recommended to store 128-bit UUIDs in a compact format. The same descriptor UUIDs are used for each characteristic and Apple-defined characteristics use 128-bit UUIDs based on a common base UUID (similar to the way 16-bit UUIDs assigned by the Bluetooth SIG operate).</p></li>
</ul>
<p>To interface with the BLE stack, about a dozen functions must be implemented, for managing device addresses and names, advertisements and connections, and for exposing services, characteristics and descriptors.</p>
</div>
<div class="section" id="includes">
<h2>Includes<a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HAPBase.h</span></code></p></li>
</ul>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="structHAPPlatformBLEPeripheralManagerCharacteristicProperties.html#exhale-struct-structhapplatformbleperipheralmanagercharacteristicproperties"><span class="std std-ref">Struct HAPPlatformBLEPeripheralManagerCharacteristicProperties</span></a></p></li>
<li><p><a class="reference internal" href="structHAPPlatformBLEPeripheralManagerDelegate.html#exhale-struct-structhapplatformbleperipheralmanagerdelegate"><span class="std std-ref">Struct HAPPlatformBLEPeripheralManagerDelegate</span></a></p></li>
<li><p><a class="reference internal" href="structHAPPlatformBLEPeripheralManagerDescriptorProperties.html#exhale-struct-structhapplatformbleperipheralmanagerdescriptorproperties"><span class="std std-ref">Struct HAPPlatformBLEPeripheralManagerDescriptorProperties</span></a></p></li>
<li><p><a class="reference internal" href="structHAPPlatformBLEPeripheralManagerDeviceAddress.html#exhale-struct-structhapplatformbleperipheralmanagerdeviceaddress"><span class="std std-ref">Struct HAPPlatformBLEPeripheralManagerDeviceAddress</span></a></p></li>
<li><p><a class="reference internal" href="structHAPPlatformBLEPeripheralManagerUUID.html#exhale-struct-structhapplatformbleperipheralmanageruuid"><span class="std std-ref">Struct HAPPlatformBLEPeripheralManagerUUID</span></a></p></li>
</ul>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a90e57f6feff02e0be2ff2ba8d4f9e269.html#exhale-function-happlatformbleperipheralmanager-8h-1a90e57f6feff02e0be2ff2ba8d4f9e269"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerAddCharacteristic</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1ae93952411ab8c2e897b0f3ef52cc153e.html#exhale-function-happlatformbleperipheralmanager-8h-1ae93952411ab8c2e897b0f3ef52cc153e"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerAddDescriptor</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a7ab3ed4bdfdd1bd801461bc3924e4419.html#exhale-function-happlatformbleperipheralmanager-8h-1a7ab3ed4bdfdd1bd801461bc3924e4419"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerAddService</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a11b9eb991c850529b83b7743222f2f0d.html#exhale-function-happlatformbleperipheralmanager-8h-1a11b9eb991c850529b83b7743222f2f0d"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerAllowsServiceRefresh</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a7b64de91a2534cf1ef4eff38c0882721.html#exhale-function-happlatformbleperipheralmanager-8h-1a7b64de91a2534cf1ef4eff38c0882721"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerCancelCentralConnection</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a673a40cee7deacadbf96b3d8efc17e3a.html#exhale-function-happlatformbleperipheralmanager-8h-1a673a40cee7deacadbf96b3d8efc17e3a"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerGetAdvertisementAddress</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1ad70913633afc442b527d09d0c41d1240.html#exhale-function-happlatformbleperipheralmanager-8h-1ad70913633afc442b527d09d0c41d1240"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerPublishServices</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1ae047a748abfb3f2ed221befd07bc5603.html#exhale-function-happlatformbleperipheralmanager-8h-1ae047a748abfb3f2ed221befd07bc5603"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerRemoveAllServices</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1aca03583c8a8fc193ee50faed7bb4b74c.html#exhale-function-happlatformbleperipheralmanager-8h-1aca03583c8a8fc193ee50faed7bb4b74c"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerSendHandleValueIndication</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1a6cea49b28e79308f4a5cca898d9ecef3.html#exhale-function-happlatformbleperipheralmanager-8h-1a6cea49b28e79308f4a5cca898d9ecef3"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerSetDelegate</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1ae9dbfdf7bfe44c98c9867161c6d06230.html#exhale-function-happlatformbleperipheralmanager-8h-1ae9dbfdf7bfe44c98c9867161c6d06230"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerSetDeviceAddress</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1ae4ff57fb8d074087be9a6be00c9fd509.html#exhale-function-happlatformbleperipheralmanager-8h-1ae4ff57fb8d074087be9a6be00c9fd509"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerSetDeviceName</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1aa7db452c971552fda0ddc870ce2e3469.html#exhale-function-happlatformbleperipheralmanager-8h-1aa7db452c971552fda0ddc870ce2e3469"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerStartAdvertising</span></a></p></li>
<li><p><a class="reference internal" href="function_HAPPlatformBLEPeripheralManager_8h_1aa661aaef5952a82513a097c7aa27804a.html#exhale-function-happlatformbleperipheralmanager-8h-1aa661aaef5952a82513a097c7aa27804a"><span class="std std-ref">Function HAPPlatformBLEPeripheralManagerStopAdvertising</span></a></p></li>
</ul>
</div>
<div class="section" id="defines">
<h2>Defines<a class="headerlink" href="#defines" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="define_HAPPlatformBLEPeripheralManager_8h_1a17fdd0bc23c1955e25f9db91a207ef16.html#exhale-define-happlatformbleperipheralmanager-8h-1a17fdd0bc23c1955e25f9db91a207ef16"><span class="std std-ref">Define kHAPPlatformBLEPeripheralManager_MaxAttributeBytes</span></a></p></li>
</ul>
</div>
<div class="section" id="typedefs">
<h2>Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1a617b24d8882718fb0aef714b9dd83a56.html#exhale-typedef-happlatformbleperipheralmanager-8h-1a617b24d8882718fb0aef714b9dd83a56"><span class="std std-ref">Typedef HAPPlatformBLEPeripheralManager</span></a></p></li>
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1a90307ee9d962b01b58dc09484d1c38f4.html#exhale-typedef-happlatformbleperipheralmanager-8h-1a90307ee9d962b01b58dc09484d1c38f4"><span class="std std-ref">Typedef HAPPlatformBLEPeripheralManagerAttributeHandle</span></a></p></li>
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1af7f2ef4b7b0d08f535b0d73555add380.html#exhale-typedef-happlatformbleperipheralmanager-8h-1af7f2ef4b7b0d08f535b0d73555add380"><span class="std std-ref">Typedef HAPPlatformBLEPeripheralManagerConnectionHandle</span></a></p></li>
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1a0c50d38977aaa6051406ef57108e4f93.html#exhale-typedef-happlatformbleperipheralmanager-8h-1a0c50d38977aaa6051406ef57108e4f93"><span class="std std-ref">Typedef HAPPlatformBLEPeripheralManagerRef</span></a></p></li>
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1a02fd738e320aeba5b3ff3a870553d667.html#exhale-typedef-happlatformbleperipheralmanager-8h-1a02fd738e320aeba5b3ff3a870553d667"><span class="std std-ref">Typedef HAPStaticAssert_HAPPlatformBLEPeripheralManagerDeviceAddress</span></a></p></li>
<li><p><a class="reference internal" href="typedef_HAPPlatformBLEPeripheralManager_8h_1a5eef1b25a267ba7e2f88871a89aad794.html#exhale-typedef-happlatformbleperipheralmanager-8h-1a5eef1b25a267ba7e2f88871a89aad794"><span class="std std-ref">Typedef HAPStaticAssert_HAPPlatformBLEPeripheralManagerUUID</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright © 2021 Apple Inc. All Rights Reserved..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>