From 697de855de500a78943551af526350782d33c031 Mon Sep 17 00:00:00 2001
From: HomeKit ADK <noreply@apple.com>
Date: Mon, 18 Oct 2021 16:36:35 -0700
Subject: [PATCH] Fix mdns v1310.80.1 compilation

Resolves compilation issues for mDNSResponder-1310.80.1

---
 Clients/dns-sd.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/Clients/dns-sd.c b/Clients/dns-sd.c
index 446f15e..7ddc5c5 100644
--- a/Clients/dns-sd.c
+++ b/Clients/dns-sd.c
@@ -59,6 +59,7 @@
 
 #include <ctype.h>
 #include <stdio.h>          // For stdout, stderr
+#include <stdarg.h>
 #include <stdlib.h>         // For exit()
 #include <string.h>         // For strlen(), strcpy()
 #include <errno.h>          // For errno, EINTR
@@ -919,6 +920,9 @@ static int snprintf_safe(char *str, size_t size, const char *format, ...)
     va_end(ptr);
     if (result > 0 && size > 0)
     {
+#ifndef MIN
+#define MIN(a,b) (((a) < (b)) ? (a) : (b))
+#endif
         length = MIN((size_t)result, size-1);
     }
     return length;
-- 
2.20.1

