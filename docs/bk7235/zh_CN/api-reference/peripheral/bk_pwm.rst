PWM
================

:link_to_translation:`en:[English]`

PWM API Status
------------------

+----------------------------------------------+---------+---------+--------+--------+--------+
| API                                          | BK7231N | BK7231U | BK7251 | BK7271 | BK7236 |
+==============================================+=========+=========+========+========+========+
| :cpp:func:`bk_pwm_driver_init`               | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_driver_deinit`             | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_init`                      | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_deinit`                    | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_set_duty_period`           | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_start`                     | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_stop`                      | Y       | Y       | Y      | Y      | Y      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_set_init_signal_low`       | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_set_init_signal_high`      | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_register_isr`              | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_enable_interrupt`          | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_disable_interrupt`         | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_group_init`                | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_group_deinit`              | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_group_start`               | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_group_stop`                | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_capture_init`              | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_capture_deinit`            | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_capture_start`             | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_capture_stop`              | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+
| :cpp:func:`bk_pwm_capture_get_value`         | Y       | N       | N      | N      | N      |
+----------------------------------------------+---------+---------+--------+--------+--------+


PWM Channel Number
------------------------

+----------------+---------+---------+--------+--------+--------+
| Capability     | BK7231N | BK7236  | BK7231U| BK7251 | BK7271 |
+================+=========+=========+========+========+========+
| Channel Number | 6       | 6       | 6      | 6      | 12     |
+----------------+---------+---------+--------+--------+--------+

PWM Group Support
-------------------------

+----------------+---------+---------+--------+--------+--------+
| Capability     | BK7231N | BK7236  | BK7231U| BK7251 | BK7271 |
+================+=========+=========+========+========+========+
| Software Group | Y       | Y       | Y      | Y      | Y      |
+----------------+---------+---------+--------+--------+--------+
| Hardware Group | Y       | Y       | N      | N      | N      |
+----------------+---------+---------+--------+--------+--------+


PWM Duty Support
-------------------------

+-------------------+---------+---------+--------+--------+--------+
| Capability        | BK7231N | BK7236  | BK7231U| BK7251 | BK7271 |
+===================+=========+=========+========+========+========+
| period_cycle      | Y       | Y       | Y      | Y      | Y      |
+-------------------+---------+---------+--------+--------+--------+
| duty_cycle        | Y       | Y       | Y      | Y      | Y      |
+-------------------+---------+---------+--------+--------+--------+
| duty2_cycle       | Y       | Y       | N      | N      | N      |
+-------------------+---------+---------+--------+--------+--------+
| duty3_cycle       | Y       | Y       | N      | N      | N      |
+-------------------+---------+---------+--------+--------+--------+

For unsupported duty fileds, we should set them to 0.

PWM Capture Edge Support Status
--------------------------------

+-------------------+---------+---------+--------+--------+--------+
| Capability        | BK7231N | BK7236  | BK7231U| BK7251 | BK7271 |
+===================+=========+=========+========+========+========+
| PWM_CAPTURE_POS   | Y       | Y       | Y      | Y      | N      |
+-------------------+---------+---------+--------+--------+--------+
| PWM_CAPTURE_NEG   | Y       | Y       | Y      | Y      | N      |
+-------------------+---------+---------+--------+--------+--------+
| PWM_CAPTURE_EDGE  | Y       | Y       | N      | N      | Y      |
+-------------------+---------+---------+--------+--------+--------+

PWM Channel and GPIO Map
---------------------------------

+-------------------+---------+---------+--------+--------+-----------+
| Channel Number    | BK7231N | BK7236  | BK7231U| BK7251 | BK7271    |
+===================+=========+=========+========+========+===========+
| 0                 | 6       | 6       | 6      | 6      | 3         |
+-------------------+---------+---------+--------+--------+-----------+
| 1                 | 7       | 7       | 7      | 7      | 4         |
+-------------------+---------+---------+--------+--------+-----------+
| 2                 | 8       | 8       | 8      | 8      | 5         |
+-------------------+---------+---------+--------+--------+-----------+
| 3                 | 9       | 9       | 9      | 9      | 6         |
+-------------------+---------+---------+--------+--------+-----------+
| 4                 | 24      | 24      | 24     | 26     | 7         |
+-------------------+---------+---------+--------+--------+-----------+
| 5                 | 26      | 26      | 24     | 26     | 8         |
+-------------------+---------+---------+--------+--------+-----------+
| 6                 |         |         |        |        | 18/26/30  |
+-------------------+---------+---------+--------+--------+-----------+
| 7                 |         |         |        |        | 19/27/31  |
+-------------------+---------+---------+--------+--------+-----------+
| 8                 |         |         |        |        | 20/28/32  |
+-------------------+---------+---------+--------+--------+-----------+
| 9                 |         |         |        |        | 21/29/33  |
+-------------------+---------+---------+--------+--------+-----------+
| 10                |         |         |        |        | 25        |
+-------------------+---------+---------+--------+--------+-----------+
| 11                |         |         |        |        | 35        |
+-------------------+---------+---------+--------+--------+-----------+

If the channel has more than one GPIO to map, the channel init API will choose the smallest GPIO port as the default
value. We can call bk_pwm_set_gpio() to change it after the init API is called.

PWM API Reference
---------------------

.. include:: ../../_build/inc/pwm.inc

PWM API Typedefs
---------------------
.. include:: ../../_build/inc/pwm_types.inc
.. include:: ../../_build/inc/hal_pwm_types.inc


