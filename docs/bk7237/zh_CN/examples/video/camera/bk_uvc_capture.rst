UVC 拍照 demo
========================

:link_to_translation:`en:[English]`

1 功能概述
-------------------------------------
	拍照的作用主要是将UVC sensor采集的一帧原始数据，存储到SDCard上。

2 代码路径
""""""""""""""""""""""""
	demo路径：``./components/demos/media/video/uvc_capture_display``

3 cli命令简介
-------------------------------------
	demo支持的命令如下表：

	+----------------------------------------+--------------------------+----------------------+
	|             Command                    |      Param               |   Description        |
	+========================================+==========================+======================+
	| cpu1 uvc cpu1_init                     | 无                       +初始化cpu1 uvc mailbox|
	+----------------------------------------+--------------------------+----------------------+
	| uvc cpu0_init                          | 无                       |初始化cpu0 uvc mailbox|
	+----------------------------------------+--------------------------+----------------------+
	| uvc init param1 param2 param3          | param1:width             |图像的宽度            |
	|                                        +--------------------------+----------------------+
	|                                        | param2:height            |图像的高度            |
	|                                        +--------------------------+----------------------+
	|                                        | param3:frame_rate        |图像的帧率            |
	+----------------------------------------+--------------------------+----------------------+
	|                                        | param1:width             |图像的宽度            |
	|                                        +--------------------------+----------------------+
	| uvc display_init param1 param2 param3  | param2:height            |图像的高度            |
	|                  param4                +--------------------------+----------------------+
	|                                        | param3:frame_rate        |图像的帧率            |
	|                                        +--------------------------+----------------------+
	|                                        | param4:rgb_clk_div       |rgb屏的时钟分频系数   |
	+----------------------------------------+--------------------------+----------------------+
	| uvc start                              | 无                       |uvc开始传输           |
	+----------------------------------------+--------------------------+----------------------+
	| uvc capture                            | 无                       |uvc拍照               |
	+----------------------------------------+--------------------------+----------------------+
	| uvc stop                               | 无                       |uvc停止传输           |
	+----------------------------------------+--------------------------+----------------------+
	| uvc deinit                             | 无                       |uvc和cpu1 mailbox释放 |
	+----------------------------------------+--------------------------+----------------------+
	| uvc cpu0_init                          | 无                       |cpu0 mailbox释放      |
	+----------------------------------------+--------------------------+----------------------+

	demo运行依赖的宏配置：
	
	+--------------------------------------+------------------------+----------------------------------------------------+---------+
	|                 NAME                 |      Description       |                      File                          |  value  |
	+======================================+========================+====================================================+=========+
	|CONFIG_USB_HOST                       |配置是否支持usb host    |``properties\soc\bk7256_cp1\bk7256_cp1.defconfig``  |    y    |
	+--------------------------------------+------------------------+----------------------------------------------------+---------+
	|CONFIG_USB_UVC                        |配置是否支持把uvc       |``properties\soc\bk7256_cp1\bk7256_cp1.defconfig``  |    y    |
	+--------------------------------------+------------------------+----------------------------------------------------+---------+

4 演示介绍
-------------------------------------
	demo执行的步骤如下：
	
	1、准备好uvc摄像头，连接方式如下图所示：
	
	2、顺序发送下面命令：
	
		fatfstest M 1
		
		cpu1 uvc cpu1_init
		
		uvc cpu0_init
		
		uvc init 640 480 20
		
		uvc start
		
		uvc capture
		
		uvc stop
		
		uvc deinit
		
		uvc cpu0_deinit
		
.. figure:: ../../../../../common/_static/uvc_display_evb.png
    :align: center
    :alt: uvc屏显时板子的连接示意
    :figclass: align-center

    Figure 1. uvc屏显时板子的连接示意

5 详细配置及其说明
-------------------------------------
	1、显示初始化说明：uvc display_init param1 param2 param3 param4
	
	param1和param2表示USB枚举到摄像头支持的分辨率的宽度和高度。
	
	param3表示UVC支持的帧率，可调范围由UVC本身决定，5、10、15、20、25、30。
	
.. note::

	注意：上面的拍照命令支持连续拍照。
