ADC TF卡录音PCM数据demo
========================

:link_to_translation:`en:[English]`

1、功能概述
--------------------
	mic1按照8K采样率采集音频数据并保存为 ``xx.pcm`` 文件存储至TF卡。

2、代码路径
--------------------
	demo路径: ``\components\demos\media\audio\audio_record``

	AUDIO ADC/DAC API接口的详细说明请参考同网页: ``/api-reference/multi_media/bk_aud.html``

3、cli命令简介
--------------------
demo支持的命令如下表:

+------------------------------------------------+----------------------+
|Command                                         |Description           |
+================================================+======================+
|aud_cp0_audio_record_test {start|stop} xx.pcm   |录音到xx.pcm文件      |
+------------------------------------------------+----------------------+

demo运行依赖的宏配置:

+---------------------------+----------------------------+----------------------------------------------------+-----+
|Name                       |Description                 |   File                                             |value|
+===========================+============================+====================================================+=====+
|CONFIG_AUDIO               |配置audio功能               |``\middleware\soc\bk7237_cp1\bk7237_cp1.defconfig`` |  y  |
+---------------------------+----------------------------+----------------------------------------------------+-----+
|CONFIG_AUDIO_RISCV_IP_V1_0 |配置audio ip                |``\middleware\soc\bk7237_cp1\bk7237_cp1.defconfig`` |  y  |
+---------------------------+----------------------------+----------------------------------------------------+-----+
|CONFIG_AUDIO_TEST          |配置demo使能                |``\middleware\soc\bk7237_cp1\bk7237_cp1.defconfig`` |  y  |
+---------------------------+----------------------------+----------------------------------------------------+-----+
|CONFIG_AUDIO_TEST          |配置demo使能                |``\middleware\soc\bk7237\bk7237.defconfig``         |  y  |
+---------------------------+----------------------------+----------------------------------------------------+-----+

demo运行依赖的库和驱动:
 - DMA DMA驱动
 - AUD audio模块驱动
 - PSRAM PSRAM驱动
 - MAILBOX mailbox驱动

4 演示介绍
--------------------

demo执行的步骤如下:

	1.挂载TF卡
	 - Uart发送AT指令 ``fatfstest M 1`` 挂载TF卡

	2.执行录音测试
	 - Uart发送AT指令 ``aud_cp0_audio_record_test start xx.pcm`` 开始录音到 ``xx.pcm`` 文件

	3.停止录音测试
	 - Uart发送AT指令 ``aud_cp0_audio_record_test stop xx.pcm`` 停止录音，结束测试，音频会保存在TF卡的根目录文件 ``xx.pcm`` 中


5、详细配置及说明
--------------------------
.. note::
 - 1.case执行前需要初始化PSRAM和挂载TF卡;
 - 2.执行此case时需要确保没有其他模块正在使用PSRAM;
 - 3.此demo源码较多, 所以就不在此处展开说明了，请参考源码;
