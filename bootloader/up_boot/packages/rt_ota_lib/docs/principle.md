# OTA 工作原理

OTA 升级其实就是 IAP 在线编程。在嵌入式设备 OTA 中，通常通过串口或者网络等方式，将升级数据包下载到 Flash，然后将下载得到的数据包搬运到 MCU 的代码执行区域进行覆盖，以完成设备固件升级更新的功能。

嵌入式设备的 OTA 升级一般是不基于文件系统的，而是通过对 Flash 划分为不同的功能区域来完成 OTA 升级功能。

在嵌入式系统方案里，要完成一次 OTA 固件远端升级，通常需要以下三个核心阶段：

1. 上传新固件到 OTA 服务器
2. 设备端下载新的 OTA 固件
3. bootloader 对 OTA 固件进行校验、解密和搬运（搬运到可执行程序区域）

详细的 OTA 升级流程如下图所示：

![OTA 升级流程](./figures/RT-Thread_OTA_Process.png)
